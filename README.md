# Телеграм-бот для цветочного магазина

Этот проект представляет собой Telegram-бота для цветочного магазина, который позволяет клиентам просматривать каталог товаров, оформлять заказы и получать информацию о статусе заказов.

## Особенности

- Интеграция с Telegram Bot API
- Поддержка Telegram WebApps для удобного просмотра каталога
- Проверка доступности основных сервисов (бэкенд, API) перед обработкой команд
- Механизм уведомления пользователей о недоступности сервиса
- Healthcheck для мониторинга состояния бота
- Оптимизировано для работы с Docker и Docker Compose

## Требования

- Node.js 18+
- Docker и Docker Compose (для развертывания)
- Токен Telegram бота (получается у [@BotFather](https://t.me/botfather))

## Установка и запуск

### Через Docker Compose (рекомендуется)

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/flower-telegram-bot.git
cd flower-telegram-bot
```

2. Создайте файл `.env` со следующими параметрами:
```
TELEGRAM_BOT_TOKEN=ваш_токен_от_botfather
WEBAPP_URL=https://ваш_домен_фронтенда
API_URL=http://flower-backend:3000
NODE_ENV=production
PORT=3000
```

3. Запустите бота:
```bash
docker compose up -d
```

### Локальная разработка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/flower-telegram-bot.git
cd flower-telegram-bot
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл `.env` в корне проекта (см. пример выше)

4. Запустите бота в режиме разработки:
```bash
npm run dev
```

## Архитектура

Бот написан на Node.js с использованием библиотеки Telegraf. Он может работать как в режиме long polling (для разработки), так и в webhook режиме (для продакшена).

Основные компоненты:
- **bot.js** - основной файл с логикой бота
- **wait-for-it.sh** - скрипт для ожидания доступности API перед запуском
- **start.sh** - скрипт запуска с проверкой зависимостей
- **Docker** и **docker-compose.yml** - для удобного развертывания

## Команды бота

- `/start` - начать работу с ботом
- `/status` - проверить статус доступности сервисов

## Тестирование

Убедитесь, что ваш основной сервер (backend) запущен и доступен перед тестированием функциональности бота.

## Лицензия

MIT 